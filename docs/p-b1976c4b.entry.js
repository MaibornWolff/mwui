/*!
 * Built with Stencil
 * Copyright (c) Maibornwolff GmbH.
 */
import{r as t,c as s,h as i,H as r,g as o}from"./p-0cc86aa3.js";const e=class{constructor(i){t(this,i),this.imgDidLoad=s(this,"imgDidLoad",6),this.imgLoadError=s(this,"imgLoadError",6),this.onIntersection=async t=>{for(const s of t)s.isIntersecting&&(this.observer&&this.disconnectObserver(),this.setSrc(s.target))},this.isLoaded=!1,this.srcSetState=void 0,this.preloadSrc=void 0,this.src=void 0,this.alt=void 0,this.lazyLoad=!0,this.fallback=void 0,this.srcset=void 0}onSrcSet(t){this.setSrcSet(t)}connectedCallback(){this.srcset&&this.setSrcSet(this.srcset)}componentDidLoad(){const{imgElement:t,lazyLoad:s}=this;t&&s?this.connectObserver(t):this.setSrc(t)}setSrcSet(t){this.srcSetState=Array.isArray(t)?t.map((t=>`${t.src} ${t.size}`)).join(","):t}setSrc(t){t.getAttribute("data-src")&&(t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src"))}connectObserver(t){this.observer=new IntersectionObserver(this.onIntersection),this.observer.observe(t)}disconnectObserver(){this.observer.disconnect()}onLoad(){this.isLoaded=!0,this.imgDidLoad.emit()}onError(){this.imgLoadError.emit(),this.fallback&&this.imgElement.setAttribute("src",this.fallback)}render(){const{src:t,alt:s,preloadSrc:o,isLoaded:e,srcSetState:h,onLoad:a,onError:c}=this;return i(r,{class:"mw-img"},i("img",{decoding:"async","data-src":t,alt:s,part:"image",onLoad:a.bind(this),onError:c.bind(this),ref:t=>this.imgElement=t,srcset:h}),o&&!e&&i("span",null,i("img",{decoding:"sync",src:o,alt:s,id:"preload-img"}),i("div",{class:"blur"})))}get el(){return o(this)}static get watchers(){return{srcset:["onSrcSet"]}}};e.style=":host{display:block;position:relative;width:100%;height:100%}:host img,:host span,:host .blur{display:block;position:absolute;top:0;left:0;width:100%;height:100%}:host #preload-img{z-index:2}:host .blur{backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);z-index:3}";export{e as mw_img}